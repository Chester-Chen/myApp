<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css"/>
    <style>
      header {
        position: relative;
        width: 100%;
        height: 50px;
        background-color: #1E9FFF;
        }
        header .left {
        position: absolute;
        bottom: 0;
        left: : 0;
        width: 100px;
        height: 50px;
        line-height: 50px;
        font-size: 20px; color: #fff; text-align: center;
        }
    </style>
</head>
<body>
    <header>
        <div class="left" onclick="api.closeWin();">返回</div>
    </header> 
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript">
    apiready = function(){
        // bmap
        var map = api.require('bMap');
        var baiduNavigation = api.require('baiduNavigation');

        /* 百度地图打开 */
        map.open({
            rect: {
                x: 0,
                y: 50,
                w: api.frameWidth,
                h: api.frameHeight
            },
            center: {
                // 默认帝都经纬度
                lon: 116.4021310000,
                lat: 39.9994480000
            },
            zoomLevel: 10,
            showUserLocation: true, 
            fixedOn: api.frameName,
            fixed: true
        },  function(ret) {
            if (ret.status) {
                map.showUserLocation({
                isShow: true,
                trackingMode: 'none'
            });
            }
        });

        /* 百度地图结束 */

        /* 导航开始 */ 
        baiduNavigation.start({
            start: {                            // 起点信息.
                position: {                     // 经纬度，与address配合可为空
                    lon: 112.47723797622677,    // 经度.
                    lat: 34.556480000000015     // 纬度.
                },
                title: "中国四大石窟之一",       // 描述信息
                address: "龙门石窟"             // 地址信息，与position配合为空
            },
            goBy: [{                            // 途经点位置信息.
                position: {                     // 经纬度，与address配合可为空
                    lon: 109.77539000000002,    // 经度
                    lat: 33.43144               // 纬度.
                },
                title: "释源",                  // 描述信息
                address: "白马寺"               // 地址信息，与position配合为空
            }],
            end: {                              // 终点信息.
                position: {                     // 经纬度，与address配合可为空
                    lon: 111.57062599999995,    // 经度
                    lat: 33.784214              // 纬度
                },
                title: "龙蛇之窟",               // 描述信息
                address: "鸡冠洞"               // 地址信息，与position配合为空
            }
        }, function(ret, err) {
            if (ret.status) {
                api.alert({
                    title: "提示",
                    msg: '导航成功'
                });
            } else {
                var msg = "未知错误";
                if (1 == err.code) {
                    msg = "获取地理位置失败";
                }
                if (2 == err.code) {
                    msg = "定位服务未开启";
                }
                if (3 == err.code) {
                    msg = "线路取消";
                }
                if (4 == err.code) {
                    msg = "退出导航";
                }
                if (5 == err.code) {
                    msg = "退出导航声明页面";
                }
                api.alert({
                    title: "导航出错",
                    msg: msg
                });
            }
        });


        /* 导航结束 */
     

     
       
    };
</script>
</html>